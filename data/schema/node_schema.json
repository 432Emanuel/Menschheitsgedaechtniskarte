{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://menschheitsgedaechtniskarte.de/data/schema/node_schema.json",
  "title": "Node Schema",
  "description": "Schema für alle Nodes im Menschheitsgedächtniskarte-System (Individuen, Orte, Konzepte, Ereignisse)",
  "type": "object",
  "required": ["id", "name", "type"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Eindeutiger Bezeichner für den Node (z.B. HUM-DE-EMANUEL-1989 oder PLACE-GOBEKLI-TEPE-0001)",
      "pattern": "^[A-Z]+-[A-Z]+-[A-Z0-9-]+$"
    },
    "name": {
      "type": "string",
      "description": "Anzeigename des Nodes"
    },
    "type": {
      "type": "string",
      "enum": ["individual", "place", "concept", "event", "pattern", "institution", "document", "candidate"],
      "description": "Kategorie des Nodes"
    },
    "description": {
      "type": "string",
      "description": "Ausführliche Beschreibung des Nodes"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "created": {
          "type": "string",
          "format": "date",
          "description": "Erstellungsdatum"
        },
        "modified": {
          "type": "string",
          "format": "date",
          "description": "Letztes Änderungsdatum"
        },
        "version": {
          "type": "string",
          "description": "Version des Nodes"
        },
        "status": {
          "type": "string",
          "enum": ["draft", "active", "deprecated"],
          "default": "active"
        },
        "epistemic_layer": {
          "type": "string",
          "description": "Epistemische Schicht (z.B. L2 für hypothetisch, L3 für empirisch)",
          "pattern": "^L[0-9]$"
        },
        "resonance_layer": {
          "type": "string",
          "description": "Resonanzschicht (z.B. R0 für neutral, R1 für hohe Resonanz)",
          "pattern": "^R[0-9]$"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Konfidenz der Zuordnung (0-1)"
        },
        "source": {
          "type": "string",
          "description": "Quelle der Information"
        },
        "contributors": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Mitwirkende an diesem Node"
        }
      }
    },
    "attributes": {
      "type": "object",
      "description": "Typ-spezifische Attribute",
      "additionalProperties": true
    },
    "connections": {
      "type": "array",
      "description": "Verbindungen zu anderen Nodes",
      "items": {
        "$ref": "#/definitions/connection"
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Schlagworte für Kategorisierung"
    }
  },
  "definitions": {
    "connection": {
      "type": "object",
      "required": ["type", "target_id"],
      "properties": {
        "type": {
          "type": "string",
          "description": "Art der Verbindung (z.B. BUILT_UPON, REFRACTS_TO, EXPRESSES)"
        },
        "target_id": {
          "type": "string",
          "description": "ID des Ziel-Nodes"
        },
        "strength": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "default": 0.5,
          "description": "Stärke der Verbindung (0-1)"
        },
        "direction": {
          "type": "string",
          "enum": ["directed", "undirected"],
          "default": "directed"
        },
        "description": {
          "type": "string",
          "description": "Beschreibung der Verbindung"
        }
      }
    }
  },
  "examples": [
    {
      "id": "HUM-DE-EMANUEL-1989",
      "name": "Philipp Emanuel",
      "type": "individual",
      "description": "Individueller Node im Menschheitsgedächtniskarte-System",
      "metadata": {
        "created": "2026-01-22",
        "version": "1.0.0",
        "status": "active",
        "epistemic_layer": "L3",
        "resonance_layer": "R0"
      },
      "connections": [
        {
          "type": "INSTANCE_OF_POTENTIAL",
          "target_id": "HUMANITY_POTENTIAL",
          "strength": 0.9
        }
      ]
    }
  ]
}
